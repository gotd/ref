<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: cgo_unix.go in package net</title>
<link href="../../css/light-v0.2.7-preview.css" rel="stylesheet">
<script src="../../jvs/golds-v0.2.7-preview.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	cgo_unix.go

<span class="title">Belonging Package</span>
	<a href="../../pkg/net.html">net</a>
</code></pre>
<style>input[type=radio] {display: none;}
{background: #226; color: #ff8;}
input[id=i0]:checked ~pre .i0,
input[id=i1]:checked ~pre .i1,
input[id=i2]:checked ~pre .i2,
input[id=i3]:checked ~pre .i3
{background: brown; color: #eed;}
</style><input id="i0" type="radio" name="i"/>
<input id="i1" type="radio" name="i"/>
<input id="i2" type="radio" name="i"/>
<input id="i3" type="radio" name="i"/>

<pre class="line-numbers">
<span class="codeline" id="line-1"><code><span class="comment">// Code generated by cmd/cgo; DO NOT EDIT.</span></code></span>
<span class="codeline" id="line-2"><code></code></span>
<span class="codeline" id="line-3"><code><span class="comment">//line /usr/local/go/src/net/cgo_unix.go:1:1</span></code></span>
<span class="codeline" id="line-4"><code><span class="comment">// Copyright 2011 The Go Authors. All rights reserved.</span></code></span>
<span class="codeline" id="line-5"><code><span class="comment">// Use of this source code is governed by a BSD-style</span></code></span>
<span class="codeline" id="line-6"><code><span class="comment">// license that can be found in the LICENSE file.</span></code></span>
<span class="codeline" id="line-7"><code></code></span>
<span class="codeline" id="line-8"><code><span class="comment">// +build cgo,!netgo</span></code></span>
<span class="codeline" id="line-9"><code><span class="comment">// +build aix darwin dragonfly freebsd linux netbsd openbsd solaris</span></code></span>
<span class="codeline" id="line-10"><code></code></span>
<span class="codeline" id="line-11"><code><span class="keyword">package</span> net</code></span>
<span class="codeline" id="line-12"><code></code></span>
<span class="codeline" id="line-13"><code><span class="comment">/*</span></code></span>
<span class="codeline" id="line-14"><code><span class="comment">#include &lt;sys/types.h&gt;</span></code></span>
<span class="codeline" id="line-15"><code><span class="comment">#include &lt;sys/socket.h&gt;</span></code></span>
<span class="codeline" id="line-16"><code><span class="comment">#include &lt;netinet/in.h&gt;</span></code></span>
<span class="codeline" id="line-17"><code><span class="comment">#include &lt;netdb.h&gt;</span></code></span>
<span class="codeline" id="line-18"><code><span class="comment">#include &lt;unistd.h&gt;</span></code></span>
<span class="codeline" id="line-19"><code><span class="comment">#include &lt;string.h&gt;</span></code></span>
<span class="codeline" id="line-20"><code></code></span>
<span class="codeline" id="line-21"><code><span class="comment">// If nothing else defined EAI_OVERFLOW, make sure it has a value.</span></code></span>
<span class="codeline" id="line-22"><code><span class="comment">#ifndef EAI_OVERFLOW</span></code></span>
<span class="codeline" id="line-23"><code><span class="comment">#define EAI_OVERFLOW -12</span></code></span>
<span class="codeline" id="line-24"><code><span class="comment">#endif</span></code></span>
<span class="codeline" id="line-25"><code><span class="comment">*/</span></code></span>
<span class="codeline" id="line-26"><code><span class="keyword">import</span> <a href="../../pkg/unsafe.html" class="ident i0">_</a> <label for="i0"><span class="lit-string i0">"unsafe"</span></label></code></span>
<span class="codeline" id="line-27"><code></code></span>
<span class="codeline" id="line-28"><code><span class="keyword">import</span> (</code></span>
<span class="codeline" id="line-29"><code>	<label for="i1"><span class="lit-string i1">"context"</span></label></code></span>
<span class="codeline" id="line-30"><code>	<label for="i2"><span class="lit-string i2">"syscall"</span></label></code></span>
<span class="codeline" id="line-31"><code>	<label for="i3"><span class="lit-string i3">"unsafe"</span></label></code></span>
<span class="codeline" id="line-32"><code>)</code></span>
<span class="codeline" id="line-33"><code></code></span>
<span class="codeline" id="line-34"><code><span class="comment">// An addrinfoErrno represents a getaddrinfo, getnameinfo-specific</span></code></span>
<span class="codeline" id="line-35"><code><span class="comment">// error number. It's a signed number and a zero value is a non-error</span></code></span>
<span class="codeline" id="line-36"><code><span class="comment">// by convention.</span></code></span>
<span class="codeline" id="line-37"><code><span class="keyword">type</span> <a href="../../pkg/net.html#name-addrinfoErrno" class="ident">addrinfoErrno</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a></code></span>
<span class="codeline" id="line-38"><code></code></span>
<span class="codeline" id="line-39"><code><span class="keyword">func</span> (eai <a href="#line-37" class="ident">addrinfoErrno</a>) Error() <a href="../../pkg/builtin.html#name-string" class="ident">string</a>   { <span class="keyword">return</span> ( <span class="comment">/*line :36:52*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-125" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :36:61*/</span>)(( <span class="comment">/*line :36:63*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-147" class="ident">_Cfunc_gai_strerror</a> <span class="comment">/*line :36:76*/</span>)( <span class="comment">/*line :36:78*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-26" class="ident">_Ctype_int</a> <span class="comment">/*line :36:83*/</span>(<a href="#line-39" class="ident">eai</a>))) }</code></span>
<span class="codeline" id="line-40"><code><span class="keyword">func</span> (eai <a href="#line-37" class="ident">addrinfoErrno</a>) Temporary() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a> { <span class="keyword">return</span> <a href="#line-40" class="ident">eai</a> == ( <span class="comment">/*line :37:59*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-74" class="ident">_Ciconst_EAI_AGAIN</a> <span class="comment">/*line :37:69*/</span>) }</code></span>
<span class="codeline" id="line-41"><code><span class="keyword">func</span> (eai <a href="#line-37" class="ident">addrinfoErrno</a>) Timeout() <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>   { <span class="keyword">return</span> <a href="../../pkg/builtin.html#name-false" class="ident">false</a> }</code></span>
<span class="codeline" id="line-42"><code></code></span>
<span class="codeline" id="line-43"><code><span class="keyword">type</span> <a href="../../pkg/net.html#name-portLookupResult" class="ident">portLookupResult</a> <span class="keyword">struct</span> {</code></span>
<span class="codeline" id="line-44"><code>	<a href="../../use/net..portLookupResult.port.html" class="ident">port</a> <a href="../../pkg/builtin.html#name-int" class="ident">int</a></code></span>
<span class="codeline" id="line-45"><code>	<a href="../../use/net..portLookupResult.err.html" class="ident">err</a>  <a href="../../pkg/builtin.html#name-error" class="ident">error</a></code></span>
<span class="codeline" id="line-46"><code>}</code></span>
<span class="codeline" id="line-47"><code></code></span>
<span class="codeline" id="line-48"><code><span class="keyword">type</span> <a href="../../pkg/net.html#name-ipLookupResult" class="ident">ipLookupResult</a> <span class="keyword">struct</span> {</code></span>
<span class="codeline" id="line-49"><code>	<a href="../../use/net..ipLookupResult.addrs.html" class="ident">addrs</a> []<a href="iprawsock.go.html#line-31" class="ident">IPAddr</a></code></span>
<span class="codeline" id="line-50"><code>	<a href="../../use/net..ipLookupResult.cname.html" class="ident">cname</a> <a href="../../pkg/builtin.html#name-string" class="ident">string</a></code></span>
<span class="codeline" id="line-51"><code>	<a href="../../use/net..ipLookupResult.err.html" class="ident">err</a>   <a href="../../pkg/builtin.html#name-error" class="ident">error</a></code></span>
<span class="codeline" id="line-52"><code>}</code></span>
<span class="codeline" id="line-53"><code></code></span>
<span class="codeline" id="line-54"><code><span class="keyword">type</span> <a href="../../pkg/net.html#name-reverseLookupResult" class="ident">reverseLookupResult</a> <span class="keyword">struct</span> {</code></span>
<span class="codeline" id="line-55"><code>	<a href="../../use/net..reverseLookupResult.names.html" class="ident">names</a> []<a href="../../pkg/builtin.html#name-string" class="ident">string</a></code></span>
<span class="codeline" id="line-56"><code>	<a href="../../use/net..reverseLookupResult.err.html" class="ident">err</a>   <a href="../../pkg/builtin.html#name-error" class="ident">error</a></code></span>
<span class="codeline" id="line-57"><code>}</code></span>
<span class="codeline" id="line-58"><code></code></span>
<span class="codeline" id="line-59"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupHost" class="ident">cgoLookupHost</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (hosts []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {</code></span>
<span class="codeline" id="line-60"><code>	addrs, <a href="#line-59" class="ident">err</a>, <a href="#line-59" class="ident">completed</a> := <a href="#line-225" class="ident">cgoLookupIP</a>(<a href="#line-59" class="ident">ctx</a>, <span class="lit-string">"ip"</span>, <a href="#line-59" class="ident">name</a>)</code></span>
<span class="codeline" id="line-61"><code>	<span class="keyword">for</span> _, addr := <span class="keyword">range</span> <a href="#line-60" class="ident">addrs</a> {</code></span>
<span class="codeline" id="line-62"><code>		<a href="#line-59" class="ident">hosts</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-59" class="ident">hosts</a>, <a href="#line-61" class="ident">addr</a>.<a href="iprawsock.go.html#line-39" class="ident">String</a>())</code></span>
<span class="codeline" id="line-63"><code>	}</code></span>
<span class="codeline" id="line-64"><code>	<span class="keyword">return</span></code></span>
<span class="codeline" id="line-65"><code>}</code></span>
<span class="codeline" id="line-66"><code></code></span>
<span class="codeline" id="line-67"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupPort" class="ident">cgoLookupPort</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, network, service <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (port <a href="../../pkg/builtin.html#name-int" class="ident">int</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {</code></span>
<span class="codeline" id="line-68"><code>	<span class="keyword">var</span> hints  <span class="comment">/*line :65:12*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-38" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :65:29*/</span></code></span>
<span class="codeline" id="line-69"><code>	<span class="keyword">switch</span> <a href="#line-67" class="ident">network</a> {</code></span>
<span class="codeline" id="line-70"><code>	<span class="keyword">case</span> <span class="lit-string">""</span>: <span class="comment">// no hints</span></code></span>
<span class="codeline" id="line-71"><code>	<span class="keyword">case</span> <span class="lit-string">"tcp"</span>, <span class="lit-string">"tcp4"</span>, <span class="lit-string">"tcp6"</span>:</code></span>
<span class="codeline" id="line-72"><code>		<a href="#line-68" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-41" class="ident">ai_socktype</a> = ( <span class="comment">/*line :69:23*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-82" class="ident">_Ciconst_SOCK_STREAM</a> <span class="comment">/*line :69:35*/</span>)</code></span>
<span class="codeline" id="line-73"><code>		<a href="#line-68" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-42" class="ident">ai_protocol</a> = ( <span class="comment">/*line :70:23*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-78" class="ident">_Ciconst_IPPROTO_TCP</a> <span class="comment">/*line :70:35*/</span>)</code></span>
<span class="codeline" id="line-74"><code>	<span class="keyword">case</span> <span class="lit-string">"udp"</span>, <span class="lit-string">"udp4"</span>, <span class="lit-string">"udp6"</span>:</code></span>
<span class="codeline" id="line-75"><code>		<a href="#line-68" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-41" class="ident">ai_socktype</a> = ( <span class="comment">/*line :72:23*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-81" class="ident">_Ciconst_SOCK_DGRAM</a> <span class="comment">/*line :72:34*/</span>)</code></span>
<span class="codeline" id="line-76"><code>		<a href="#line-68" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-42" class="ident">ai_protocol</a> = ( <span class="comment">/*line :73:23*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-79" class="ident">_Ciconst_IPPROTO_UDP</a> <span class="comment">/*line :73:35*/</span>)</code></span>
<span class="codeline" id="line-77"><code>	<span class="keyword">default</span>:</code></span>
<span class="codeline" id="line-78"><code>		<span class="keyword">return</span> <span class="lit-number">0</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"unknown network"</span>, <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-67" class="ident">network</a> + <span class="lit-string">"/"</span> + <a href="#line-67" class="ident">service</a>}, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-79"><code>	}</code></span>
<span class="codeline" id="line-80"><code>	<span class="keyword">switch</span> <a href="lookup.go.html#line-101" class="ident">ipVersion</a>(<a href="#line-67" class="ident">network</a>) {</code></span>
<span class="codeline" id="line-81"><code>	<span class="keyword">case</span> <span class="lit-number">'4'</span>:</code></span>
<span class="codeline" id="line-82"><code>		<a href="#line-68" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-40" class="ident">ai_family</a> = ( <span class="comment">/*line :79:21*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-68" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :79:29*/</span>)</code></span>
<span class="codeline" id="line-83"><code>	<span class="keyword">case</span> <span class="lit-number">'6'</span>:</code></span>
<span class="codeline" id="line-84"><code>		<a href="#line-68" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-40" class="ident">ai_family</a> = ( <span class="comment">/*line :81:21*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-69" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :81:30*/</span>)</code></span>
<span class="codeline" id="line-85"><code>	}</code></span>
<span class="codeline" id="line-86"><code>	<span class="keyword">if</span> <a href="#line-67" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-87"><code>		port, err := <a href="#line-102" class="ident">cgoLookupServicePort</a>(&amp;<a href="#line-68" class="ident">hints</a>, <a href="#line-67" class="ident">network</a>, <a href="#line-67" class="ident">service</a>)</code></span>
<span class="codeline" id="line-88"><code>		<span class="keyword">return</span> <a href="#line-87" class="ident">port</a>, <a href="#line-87" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-89"><code>	}</code></span>
<span class="codeline" id="line-90"><code>	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-43" class="ident">portLookupResult</a>, <span class="lit-number">1</span>)</code></span>
<span class="codeline" id="line-91"><code>	<span class="keyword">go</span> <a href="#line-141" class="ident">cgoPortLookup</a>(<a href="#line-90" class="ident">result</a>, &amp;<a href="#line-68" class="ident">hints</a>, <a href="#line-67" class="ident">network</a>, <a href="#line-67" class="ident">service</a>)</code></span>
<span class="codeline" id="line-92"><code>	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {</code></span>
<span class="codeline" id="line-93"><code>	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-90" class="ident">result</a>:</code></span>
<span class="codeline" id="line-94"><code>		<span class="keyword">return</span> <a href="#line-93" class="ident">r</a>.<a href="#line-44" class="ident">port</a>, <a href="#line-93" class="ident">r</a>.<a href="#line-45" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-95"><code>	<span class="keyword">case</span> <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-67" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>():</code></span>
<span class="codeline" id="line-96"><code>		<span class="comment">// Since there isn't a portable way to cancel the lookup,</span></code></span>
<span class="codeline" id="line-97"><code><span class="comment">		// we just let it finish and write to the buffered channel.</span></code></span>
<span class="codeline" id="line-98"><code>		<span class="keyword">return</span> <span class="lit-number">0</span>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-67" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-99"><code>	}</code></span>
<span class="codeline" id="line-100"><code>}</code></span>
<span class="codeline" id="line-101"><code></code></span>
<span class="codeline" id="line-102"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupServicePort" class="ident">cgoLookupServicePort</a>(hints * <span class="comment">/*line :99:34*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-38" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :99:51*/</span>, network, service <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (port <a href="../../pkg/builtin.html#name-int" class="ident">int</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>) {</code></span>
<span class="codeline" id="line-103"><code>	cservice := <a href="../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-102" class="ident">service</a>)+<span class="lit-number">1</span>)</code></span>
<span class="codeline" id="line-104"><code>	<a href="../../pkg/builtin.html#name-copy" class="ident">copy</a>(<a href="#line-103" class="ident">cservice</a>, <a href="#line-102" class="ident">service</a>)</code></span>
<span class="codeline" id="line-105"><code>	<span class="comment">// Lowercase the C service name.</span></code></span>
<span class="codeline" id="line-106"><code>	<span class="keyword">for</span> i, b := <span class="keyword">range</span> <a href="#line-103" class="ident">cservice</a>[:<a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-102" class="ident">service</a>)] {</code></span>
<span class="codeline" id="line-107"><code>		<a href="#line-103" class="ident">cservice</a>[<a href="#line-106" class="ident">i</a>] = <a href="parse.go.html#line-247" class="ident">lowerASCII</a>(<a href="#line-106" class="ident">b</a>)</code></span>
<span class="codeline" id="line-108"><code>	}</code></span>
<span class="codeline" id="line-109"><code>	<span class="keyword">var</span> res * <span class="comment">/*line :106:11*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-38" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :106:28*/</span></code></span>
<span class="codeline" id="line-110"><code>	gerrno, <a href="#line-102" class="ident">err</a> := <span class="keyword">func</span>() (<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-26" class="ident">_Ctype_int</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>){ <span class="keyword">var</span> _cgo0 *<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-24" class="ident">_Ctype_char</a> = <span class="comment">/*line :107:31*/</span><a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <span class="keyword">var</span> _cgo1 *<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-24" class="ident">_Ctype_char</a> = <span class="comment">/*line :107:36*/</span>(*<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-24" class="ident">_Ctype_char</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-103" class="ident">cservice</a>[<span class="lit-number">0</span>])); _cgo2 := <span class="comment">/*line :107:77*/</span><a href="#line-102" class="ident">hints</a>; _cgoBase3 := <span class="comment">/*line :107:84*/</span>&amp;<a href="#line-109" class="ident">res</a>; _cgo3 := <a href="#line-110" class="ident">_cgoBase3</a>; <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-64" class="ident">_cgoCheckPointer</a>(<a href="#line-110" class="ident">_cgo2</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>); <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-64" class="ident">_cgoCheckPointer</a>(<a href="#line-110" class="ident">_cgoBase3</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-90" class="ident">_C2func_getaddrinfo</a>(<a href="#line-110" class="ident">_cgo0</a>, <a href="#line-110" class="ident">_cgo1</a>, <a href="#line-110" class="ident">_cgo2</a>, <a href="#line-110" class="ident">_cgo3</a>); }()</code></span>
<span class="codeline" id="line-111"><code>	<span class="keyword">if</span> <a href="#line-110" class="ident">gerrno</a> != <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-112"><code>		isTemporary := <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-113"><code>		<span class="keyword">switch</span> <a href="#line-110" class="ident">gerrno</a> {</code></span>
<span class="codeline" id="line-114"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :111:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-77" class="ident">_Ciconst_EAI_SYSTEM</a> <span class="comment">/*line :111:19*/</span>):</code></span>
<span class="codeline" id="line-115"><code>			<span class="keyword">if</span> <a href="#line-102" class="ident">err</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> { <span class="comment">// see golang.org/issue/6232</span></code></span>
<span class="codeline" id="line-116"><code>				<a href="#line-102" class="ident">err</a> = <a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/zerrors_linux_amd64.go.html#line-1265" class="ident">EMFILE</a></code></span>
<span class="codeline" id="line-117"><code>			}</code></span>
<span class="codeline" id="line-118"><code>		<span class="keyword">default</span>:</code></span>
<span class="codeline" id="line-119"><code>			<a href="#line-102" class="ident">err</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-110" class="ident">gerrno</a>)</code></span>
<span class="codeline" id="line-120"><code>			<a href="#line-112" class="ident">isTemporary</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-110" class="ident">gerrno</a>).<a href="#line-40" class="ident">Temporary</a>()</code></span>
<span class="codeline" id="line-121"><code>		}</code></span>
<span class="codeline" id="line-122"><code>		<span class="keyword">return</span> <span class="lit-number">0</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <a href="#line-102" class="ident">err</a>.Error(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-102" class="ident">network</a> + <span class="lit-string">"/"</span> + <a href="#line-102" class="ident">service</a>, <a href="net.go.html#line-610" class="ident">IsTemporary</a>: <a href="#line-112" class="ident">isTemporary</a>}</code></span>
<span class="codeline" id="line-123"><code>	}</code></span>
<span class="codeline" id="line-124"><code>	<span class="keyword">defer</span> <span class="keyword">func</span>() <span class="keyword">func</span>() { _cgo0 := <span class="comment">/*line :121:23*/</span><a href="#line-109" class="ident">res</a>; <span class="keyword">return</span> <span class="keyword">func</span>() { <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-64" class="ident">_cgoCheckPointer</a>(<a href="#line-124" class="ident">_cgo0</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>); <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-134" class="ident">_Cfunc_freeaddrinfo</a>(<a href="#line-124" class="ident">_cgo0</a>); }}()()</code></span>
<span class="codeline" id="line-125"><code></code></span>
<span class="codeline" id="line-126"><code>	<span class="keyword">for</span> r := <a href="#line-109" class="ident">res</a>; <a href="#line-126" class="ident">r</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <a href="#line-126" class="ident">r</a> = <a href="#line-126" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-46" class="ident">ai_next</a> {</code></span>
<span class="codeline" id="line-127"><code>		<span class="keyword">switch</span> <a href="#line-126" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-40" class="ident">ai_family</a> {</code></span>
<span class="codeline" id="line-128"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :125:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-68" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :125:16*/</span>):</code></span>
<span class="codeline" id="line-129"><code>			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-157" class="ident">RawSockaddrInet4</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-126" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-44" class="ident">ai_addr</a>))</code></span>
<span class="codeline" id="line-130"><code>			p := (*[<span class="lit-number">2</span>]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-129" class="ident">sa</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-159" class="ident">Port</a>))</code></span>
<span class="codeline" id="line-131"><code>			<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-130" class="ident">p</a>[<span class="lit-number">0</span>])&lt;&lt;<span class="lit-number">8</span> | <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-130" class="ident">p</a>[<span class="lit-number">1</span>]), <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a></code></span>
<span class="codeline" id="line-132"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :129:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-69" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :129:17*/</span>):</code></span>
<span class="codeline" id="line-133"><code>			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-164" class="ident">RawSockaddrInet6</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-126" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-44" class="ident">ai_addr</a>))</code></span>
<span class="codeline" id="line-134"><code>			p := (*[<span class="lit-number">2</span>]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-133" class="ident">sa</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-166" class="ident">Port</a>))</code></span>
<span class="codeline" id="line-135"><code>			<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-134" class="ident">p</a>[<span class="lit-number">0</span>])&lt;&lt;<span class="lit-number">8</span> | <a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-134" class="ident">p</a>[<span class="lit-number">1</span>]), <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a></code></span>
<span class="codeline" id="line-136"><code>		}</code></span>
<span class="codeline" id="line-137"><code>	}</code></span>
<span class="codeline" id="line-138"><code>	<span class="keyword">return</span> <span class="lit-number">0</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"unknown port"</span>, <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-102" class="ident">network</a> + <span class="lit-string">"/"</span> + <a href="#line-102" class="ident">service</a>}</code></span>
<span class="codeline" id="line-139"><code>}</code></span>
<span class="codeline" id="line-140"><code></code></span>
<span class="codeline" id="line-141"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoPortLookup" class="ident">cgoPortLookup</a>(result <span class="keyword">chan</span>&lt;- <a href="#line-43" class="ident">portLookupResult</a>, hints * <span class="comment">/*line :138:59*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-38" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :138:76*/</span>, network, service <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) {</code></span>
<span class="codeline" id="line-142"><code>	port, err := <a href="#line-102" class="ident">cgoLookupServicePort</a>(<a href="#line-141" class="ident">hints</a>, <a href="#line-141" class="ident">network</a>, <a href="#line-141" class="ident">service</a>)</code></span>
<span class="codeline" id="line-143"><code>	<a href="#line-141" class="ident">result</a> &lt;- <a href="#line-43" class="ident">portLookupResult</a>{<a href="#line-142" class="ident">port</a>, <a href="#line-142" class="ident">err</a>}</code></span>
<span class="codeline" id="line-144"><code>}</code></span>
<span class="codeline" id="line-145"><code></code></span>
<span class="codeline" id="line-146"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupIPCNAME" class="ident">cgoLookupIPCNAME</a>(network, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (addrs []<a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>, cname <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>) {</code></span>
<span class="codeline" id="line-147"><code>	<a href="net.go.html#line-668" class="ident">acquireThread</a>()</code></span>
<span class="codeline" id="line-148"><code>	<span class="keyword">defer</span> <a href="net.go.html#line-675" class="ident">releaseThread</a>()</code></span>
<span class="codeline" id="line-149"><code></code></span>
<span class="codeline" id="line-150"><code>	<span class="keyword">var</span> hints  <span class="comment">/*line :147:12*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-38" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :147:29*/</span></code></span>
<span class="codeline" id="line-151"><code>	<a href="#line-150" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-39" class="ident">ai_flags</a> = <a href="cgo_linux.go.html#line-23" class="ident">cgoAddrInfoFlags</a></code></span>
<span class="codeline" id="line-152"><code>	<a href="#line-150" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-41" class="ident">ai_socktype</a> = ( <span class="comment">/*line :149:22*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-82" class="ident">_Ciconst_SOCK_STREAM</a> <span class="comment">/*line :149:34*/</span>)</code></span>
<span class="codeline" id="line-153"><code>	<a href="#line-150" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-40" class="ident">ai_family</a> = ( <span class="comment">/*line :150:20*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-70" class="ident">_Ciconst_AF_UNSPEC</a> <span class="comment">/*line :150:30*/</span>)</code></span>
<span class="codeline" id="line-154"><code>	<span class="keyword">switch</span> <a href="lookup.go.html#line-101" class="ident">ipVersion</a>(<a href="#line-146" class="ident">network</a>) {</code></span>
<span class="codeline" id="line-155"><code>	<span class="keyword">case</span> <span class="lit-number">'4'</span>:</code></span>
<span class="codeline" id="line-156"><code>		<a href="#line-150" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-40" class="ident">ai_family</a> = ( <span class="comment">/*line :153:21*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-68" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :153:29*/</span>)</code></span>
<span class="codeline" id="line-157"><code>	<span class="keyword">case</span> <span class="lit-number">'6'</span>:</code></span>
<span class="codeline" id="line-158"><code>		<a href="#line-150" class="ident">hints</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-40" class="ident">ai_family</a> = ( <span class="comment">/*line :155:21*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-69" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :155:30*/</span>)</code></span>
<span class="codeline" id="line-159"><code>	}</code></span>
<span class="codeline" id="line-160"><code></code></span>
<span class="codeline" id="line-161"><code>	h := <a href="../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-146" class="ident">name</a>)+<span class="lit-number">1</span>)</code></span>
<span class="codeline" id="line-162"><code>	<a href="../../pkg/builtin.html#name-copy" class="ident">copy</a>(<a href="#line-161" class="ident">h</a>, <a href="#line-146" class="ident">name</a>)</code></span>
<span class="codeline" id="line-163"><code>	<span class="keyword">var</span> res * <span class="comment">/*line :160:11*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-38" class="ident">_Ctype_struct_addrinfo</a> <span class="comment">/*line :160:28*/</span></code></span>
<span class="codeline" id="line-164"><code>	gerrno, <a href="#line-146" class="ident">err</a> := <span class="keyword">func</span>() (<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-26" class="ident">_Ctype_int</a>, <a href="../../pkg/builtin.html#name-error" class="ident">error</a>){ <span class="keyword">var</span> _cgo0 *<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-24" class="ident">_Ctype_char</a> = <span class="comment">/*line :161:31*/</span>(*<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-24" class="ident">_Ctype_char</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(&amp;<a href="#line-161" class="ident">h</a>[<span class="lit-number">0</span>])); <span class="keyword">var</span> _cgo1 *<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-24" class="ident">_Ctype_char</a> = <span class="comment">/*line :161:65*/</span><a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; _cgoBase2 := <span class="comment">/*line :161:70*/</span>&amp;<a href="#line-150" class="ident">hints</a>; _cgo2 := <a href="#line-164" class="ident">_cgoBase2</a>; _cgoBase3 := <span class="comment">/*line :161:78*/</span>&amp;<a href="#line-163" class="ident">res</a>; _cgo3 := <a href="#line-164" class="ident">_cgoBase3</a>; <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-64" class="ident">_cgoCheckPointer</a>(<a href="#line-164" class="ident">_cgoBase2</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-64" class="ident">_cgoCheckPointer</a>(<a href="#line-164" class="ident">_cgoBase3</a>, <span class="lit-number">0</span> == <span class="lit-number">0</span>); <span class="keyword">return</span> <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-90" class="ident">_C2func_getaddrinfo</a>(<a href="#line-164" class="ident">_cgo0</a>, <a href="#line-164" class="ident">_cgo1</a>, <a href="#line-164" class="ident">_cgo2</a>, <a href="#line-164" class="ident">_cgo3</a>); }()</code></span>
<span class="codeline" id="line-165"><code>	<span class="keyword">if</span> <a href="#line-164" class="ident">gerrno</a> != <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-166"><code>		isErrorNoSuchHost := <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-167"><code>		isTemporary := <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-168"><code>		<span class="keyword">switch</span> <a href="#line-164" class="ident">gerrno</a> {</code></span>
<span class="codeline" id="line-169"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :166:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-77" class="ident">_Ciconst_EAI_SYSTEM</a> <span class="comment">/*line :166:19*/</span>):</code></span>
<span class="codeline" id="line-170"><code>			<span class="keyword">if</span> <a href="#line-146" class="ident">err</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-171"><code>				<span class="comment">// err should not be nil, but sometimes getaddrinfo returns</span></code></span>
<span class="codeline" id="line-172"><code><span class="comment">				// gerrno == C.EAI_SYSTEM with err == nil on Linux.</span></code></span>
<span class="codeline" id="line-173"><code><span class="comment">				// The report claims that it happens when we have too many</span></code></span>
<span class="codeline" id="line-174"><code><span class="comment">				// open files, so use syscall.EMFILE (too many open files in system).</span></code></span>
<span class="codeline" id="line-175"><code><span class="comment">				// Most system calls would return ENFILE (too many open files),</span></code></span>
<span class="codeline" id="line-176"><code><span class="comment">				// so at the least EMFILE should be easy to recognize if this</span></code></span>
<span class="codeline" id="line-177"><code><span class="comment">				// comes up again. golang.org/issue/6232.</span></code></span>
<span class="codeline" id="line-178"><code>				<a href="#line-146" class="ident">err</a> = <a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/zerrors_linux_amd64.go.html#line-1265" class="ident">EMFILE</a></code></span>
<span class="codeline" id="line-179"><code>			}</code></span>
<span class="codeline" id="line-180"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :177:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-75" class="ident">_Ciconst_EAI_NONAME</a> <span class="comment">/*line :177:19*/</span>):</code></span>
<span class="codeline" id="line-181"><code>			<a href="#line-146" class="ident">err</a> = <a href="net.go.html#line-601" class="ident">errNoSuchHost</a></code></span>
<span class="codeline" id="line-182"><code>			<a href="#line-166" class="ident">isErrorNoSuchHost</a> = <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-183"><code>		<span class="keyword">default</span>:</code></span>
<span class="codeline" id="line-184"><code>			<a href="#line-146" class="ident">err</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-164" class="ident">gerrno</a>)</code></span>
<span class="codeline" id="line-185"><code>			<a href="#line-167" class="ident">isTemporary</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-164" class="ident">gerrno</a>).<a href="#line-40" class="ident">Temporary</a>()</code></span>
<span class="codeline" id="line-186"><code>		}</code></span>
<span class="codeline" id="line-187"><code></code></span>
<span class="codeline" id="line-188"><code>		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <span class="lit-string">""</span>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <a href="#line-146" class="ident">err</a>.Error(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-146" class="ident">name</a>, <a href="net.go.html#line-611" class="ident">IsNotFound</a>: <a href="#line-166" class="ident">isErrorNoSuchHost</a>, <a href="net.go.html#line-610" class="ident">IsTemporary</a>: <a href="#line-167" class="ident">isTemporary</a>}</code></span>
<span class="codeline" id="line-189"><code>	}</code></span>
<span class="codeline" id="line-190"><code>	<span class="keyword">defer</span> <span class="keyword">func</span>() <span class="keyword">func</span>() { _cgo0 := <span class="comment">/*line :187:23*/</span><a href="#line-163" class="ident">res</a>; <span class="keyword">return</span> <span class="keyword">func</span>() { <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-64" class="ident">_cgoCheckPointer</a>(<a href="#line-190" class="ident">_cgo0</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>); <a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-134" class="ident">_Cfunc_freeaddrinfo</a>(<a href="#line-190" class="ident">_cgo0</a>); }}()()</code></span>
<span class="codeline" id="line-191"><code></code></span>
<span class="codeline" id="line-192"><code>	<span class="keyword">if</span> <a href="#line-163" class="ident">res</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-193"><code>		<a href="#line-146" class="ident">cname</a> = ( <span class="comment">/*line :190:11*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-125" class="ident">_Cfunc_GoString</a> <span class="comment">/*line :190:20*/</span>)(<a href="#line-163" class="ident">res</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-45" class="ident">ai_canonname</a>)</code></span>
<span class="codeline" id="line-194"><code>		<span class="keyword">if</span> <a href="#line-146" class="ident">cname</a> == <span class="lit-string">""</span> {</code></span>
<span class="codeline" id="line-195"><code>			<a href="#line-146" class="ident">cname</a> = <a href="#line-146" class="ident">name</a></code></span>
<span class="codeline" id="line-196"><code>		}</code></span>
<span class="codeline" id="line-197"><code>		<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-146" class="ident">cname</a>) &gt; <span class="lit-number">0</span> &amp;&amp; <a href="#line-146" class="ident">cname</a>[<a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-146" class="ident">cname</a>)-<span class="lit-number">1</span>] != <span class="lit-number">'.'</span> {</code></span>
<span class="codeline" id="line-198"><code>			<a href="#line-146" class="ident">cname</a> += <span class="lit-string">"."</span></code></span>
<span class="codeline" id="line-199"><code>		}</code></span>
<span class="codeline" id="line-200"><code>	}</code></span>
<span class="codeline" id="line-201"><code>	<span class="keyword">for</span> r := <a href="#line-163" class="ident">res</a>; <a href="#line-201" class="ident">r</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>; <a href="#line-201" class="ident">r</a> = <a href="#line-201" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-46" class="ident">ai_next</a> {</code></span>
<span class="codeline" id="line-202"><code>		<span class="comment">// We only asked for SOCK_STREAM, but check anyhow.</span></code></span>
<span class="codeline" id="line-203"><code>		<span class="keyword">if</span> <a href="#line-201" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-41" class="ident">ai_socktype</a> != ( <span class="comment">/*line :200:23*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-82" class="ident">_Ciconst_SOCK_STREAM</a> <span class="comment">/*line :200:35*/</span>) {</code></span>
<span class="codeline" id="line-204"><code>			<span class="keyword">continue</span></code></span>
<span class="codeline" id="line-205"><code>		}</code></span>
<span class="codeline" id="line-206"><code>		<span class="keyword">switch</span> <a href="#line-201" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-40" class="ident">ai_family</a> {</code></span>
<span class="codeline" id="line-207"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :204:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-68" class="ident">_Ciconst_AF_INET</a> <span class="comment">/*line :204:16*/</span>):</code></span>
<span class="codeline" id="line-208"><code>			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-157" class="ident">RawSockaddrInet4</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-201" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-44" class="ident">ai_addr</a>))</code></span>
<span class="codeline" id="line-209"><code>			addr := <a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>{<a href="iprawsock.go.html#line-32" class="ident">IP</a>: <a href="#line-345" class="ident">copyIP</a>(<a href="#line-208" class="ident">sa</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-160" class="ident">Addr</a>[:])}</code></span>
<span class="codeline" id="line-210"><code>			<a href="#line-146" class="ident">addrs</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-146" class="ident">addrs</a>, <a href="#line-209" class="ident">addr</a>)</code></span>
<span class="codeline" id="line-211"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :208:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-69" class="ident">_Ciconst_AF_INET6</a> <span class="comment">/*line :208:17*/</span>):</code></span>
<span class="codeline" id="line-212"><code>			sa := (*<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-164" class="ident">RawSockaddrInet6</a>)(<a href="../../pkg/unsafe.html" class="ident i3">unsafe</a>.<a href="../../pkg/unsafe.html#name-Pointer" class="ident">Pointer</a>(<a href="#line-201" class="ident">r</a>.<a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-44" class="ident">ai_addr</a>))</code></span>
<span class="codeline" id="line-213"><code>			addr := <a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>{<a href="iprawsock.go.html#line-32" class="ident">IP</a>: <a href="#line-345" class="ident">copyIP</a>(<a href="#line-212" class="ident">sa</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-168" class="ident">Addr</a>[:]), <a href="iprawsock.go.html#line-33" class="ident">Zone</a>: <a href="interface.go.html#line-185" class="ident">zoneCache</a>.<a href="interface.go.html#line-218" class="ident">name</a>(<a href="../../pkg/builtin.html#name-int" class="ident">int</a>(<a href="#line-212" class="ident">sa</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-169" class="ident">Scope_id</a>))}</code></span>
<span class="codeline" id="line-214"><code>			<a href="#line-146" class="ident">addrs</a> = <a href="../../pkg/builtin.html#name-append" class="ident">append</a>(<a href="#line-146" class="ident">addrs</a>, <a href="#line-213" class="ident">addr</a>)</code></span>
<span class="codeline" id="line-215"><code>		}</code></span>
<span class="codeline" id="line-216"><code>	}</code></span>
<span class="codeline" id="line-217"><code>	<span class="keyword">return</span> <a href="#line-146" class="ident">addrs</a>, <a href="#line-146" class="ident">cname</a>, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a></code></span>
<span class="codeline" id="line-218"><code>}</code></span>
<span class="codeline" id="line-219"><code></code></span>
<span class="codeline" id="line-220"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoIPLookup" class="ident">cgoIPLookup</a>(result <span class="keyword">chan</span>&lt;- <a href="#line-48" class="ident">ipLookupResult</a>, network, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) {</code></span>
<span class="codeline" id="line-221"><code>	addrs, cname, err := <a href="#line-146" class="ident">cgoLookupIPCNAME</a>(<a href="#line-220" class="ident">network</a>, <a href="#line-220" class="ident">name</a>)</code></span>
<span class="codeline" id="line-222"><code>	<a href="#line-220" class="ident">result</a> &lt;- <a href="#line-48" class="ident">ipLookupResult</a>{<a href="#line-221" class="ident">addrs</a>, <a href="#line-221" class="ident">cname</a>, <a href="#line-221" class="ident">err</a>}</code></span>
<span class="codeline" id="line-223"><code>}</code></span>
<span class="codeline" id="line-224"><code></code></span>
<span class="codeline" id="line-225"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupIP" class="ident">cgoLookupIP</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, network, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (addrs []<a href="iprawsock.go.html#line-31" class="ident">IPAddr</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {</code></span>
<span class="codeline" id="line-226"><code>	<span class="keyword">if</span> <a href="#line-225" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-227"><code>		<a href="#line-225" class="ident">addrs</a>, _, <a href="#line-225" class="ident">err</a> = <a href="#line-146" class="ident">cgoLookupIPCNAME</a>(<a href="#line-225" class="ident">network</a>, <a href="#line-225" class="ident">name</a>)</code></span>
<span class="codeline" id="line-228"><code>		<span class="keyword">return</span> <a href="#line-225" class="ident">addrs</a>, <a href="#line-225" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-229"><code>	}</code></span>
<span class="codeline" id="line-230"><code>	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-48" class="ident">ipLookupResult</a>, <span class="lit-number">1</span>)</code></span>
<span class="codeline" id="line-231"><code>	<span class="keyword">go</span> <a href="#line-220" class="ident">cgoIPLookup</a>(<a href="#line-230" class="ident">result</a>, <a href="#line-225" class="ident">network</a>, <a href="#line-225" class="ident">name</a>)</code></span>
<span class="codeline" id="line-232"><code>	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {</code></span>
<span class="codeline" id="line-233"><code>	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-230" class="ident">result</a>:</code></span>
<span class="codeline" id="line-234"><code>		<span class="keyword">return</span> <a href="#line-233" class="ident">r</a>.<a href="#line-49" class="ident">addrs</a>, <a href="#line-233" class="ident">r</a>.<a href="#line-51" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-235"><code>	<span class="keyword">case</span> <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-225" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>():</code></span>
<span class="codeline" id="line-236"><code>		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-225" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-237"><code>	}</code></span>
<span class="codeline" id="line-238"><code>}</code></span>
<span class="codeline" id="line-239"><code></code></span>
<span class="codeline" id="line-240"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupCNAME" class="ident">cgoLookupCNAME</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, name <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (cname <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {</code></span>
<span class="codeline" id="line-241"><code>	<span class="keyword">if</span> <a href="#line-240" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-242"><code>		_, <a href="#line-240" class="ident">cname</a>, <a href="#line-240" class="ident">err</a> = <a href="#line-146" class="ident">cgoLookupIPCNAME</a>(<span class="lit-string">"ip"</span>, <a href="#line-240" class="ident">name</a>)</code></span>
<span class="codeline" id="line-243"><code>		<span class="keyword">return</span> <a href="#line-240" class="ident">cname</a>, <a href="#line-240" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-244"><code>	}</code></span>
<span class="codeline" id="line-245"><code>	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-48" class="ident">ipLookupResult</a>, <span class="lit-number">1</span>)</code></span>
<span class="codeline" id="line-246"><code>	<span class="keyword">go</span> <a href="#line-220" class="ident">cgoIPLookup</a>(<a href="#line-245" class="ident">result</a>, <span class="lit-string">"ip"</span>, <a href="#line-240" class="ident">name</a>)</code></span>
<span class="codeline" id="line-247"><code>	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {</code></span>
<span class="codeline" id="line-248"><code>	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-245" class="ident">result</a>:</code></span>
<span class="codeline" id="line-249"><code>		<span class="keyword">return</span> <a href="#line-248" class="ident">r</a>.<a href="#line-50" class="ident">cname</a>, <a href="#line-248" class="ident">r</a>.<a href="#line-51" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-250"><code>	<span class="keyword">case</span> <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-240" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>():</code></span>
<span class="codeline" id="line-251"><code>		<span class="keyword">return</span> <span class="lit-string">""</span>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-240" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-252"><code>	}</code></span>
<span class="codeline" id="line-253"><code>}</code></span>
<span class="codeline" id="line-254"><code></code></span>
<span class="codeline" id="line-255"><code><span class="comment">// These are roughly enough for the following:</span></code></span>
<span class="codeline" id="line-256"><code><span class="comment">//</span></code></span>
<span class="codeline" id="line-257"><code><span class="comment">// Source		Encoding			Maximum length of single name entry</span></code></span>
<span class="codeline" id="line-258"><code><span class="comment">// Unicast DNS		ASCII or			&lt;=253 + a NUL terminator</span></code></span>
<span class="codeline" id="line-259"><code><span class="comment">//			Unicode in RFC 5892		252 * total number of labels + delimiters + a NUL terminator</span></code></span>
<span class="codeline" id="line-260"><code><span class="comment">// Multicast DNS	UTF-8 in RFC 5198 or		&lt;=253 + a NUL terminator</span></code></span>
<span class="codeline" id="line-261"><code><span class="comment">//			the same as unicast DNS ASCII	&lt;=253 + a NUL terminator</span></code></span>
<span class="codeline" id="line-262"><code><span class="comment">// Local database	various				depends on implementation</span></code></span>
<span class="codeline" id="line-263"><code><span class="keyword">const</span> (</code></span>
<span class="codeline" id="line-264"><code>	<a href="../../pkg/net.html#name-nameinfoLen" class="ident">nameinfoLen</a>    = <span class="lit-number">64</span></code></span>
<span class="codeline" id="line-265"><code>	<a href="../../pkg/net.html#name-maxNameinfoLen" class="ident">maxNameinfoLen</a> = <span class="lit-number">4096</span></code></span>
<span class="codeline" id="line-266"><code>)</code></span>
<span class="codeline" id="line-267"><code></code></span>
<span class="codeline" id="line-268"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupPTR" class="ident">cgoLookupPTR</a>(ctx <a href="../../pkg/context.html" class="ident i1">context</a>.<a href="../context/context.go.html#line-62" class="ident">Context</a>, addr <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (names []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>, completed <a href="../../pkg/builtin.html#name-bool" class="ident">bool</a>) {</code></span>
<span class="codeline" id="line-269"><code>	<span class="keyword">var</span> zone <a href="../../pkg/builtin.html#name-string" class="ident">string</a></code></span>
<span class="codeline" id="line-270"><code>	ip := <a href="ip.go.html#line-538" class="ident">parseIPv4</a>(<a href="#line-268" class="ident">addr</a>)</code></span>
<span class="codeline" id="line-271"><code>	<span class="keyword">if</span> <a href="#line-270" class="ident">ip</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-272"><code>		<a href="#line-270" class="ident">ip</a>, <a href="#line-269" class="ident">zone</a> = <a href="ip.go.html#line-566" class="ident">parseIPv6Zone</a>(<a href="#line-268" class="ident">addr</a>)</code></span>
<span class="codeline" id="line-273"><code>	}</code></span>
<span class="codeline" id="line-274"><code>	<span class="keyword">if</span> <a href="#line-270" class="ident">ip</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-275"><code>		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"invalid address"</span>, <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-268" class="ident">addr</a>}, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-276"><code>	}</code></span>
<span class="codeline" id="line-277"><code>	sa, salen := <a href="#line-335" class="ident">cgoSockaddr</a>(<a href="#line-270" class="ident">ip</a>, <a href="#line-269" class="ident">zone</a>)</code></span>
<span class="codeline" id="line-278"><code>	<span class="keyword">if</span> <a href="#line-277" class="ident">sa</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-279"><code>		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <span class="lit-string">"invalid address "</span> + <a href="#line-270" class="ident">ip</a>.<a href="ip.go.html#line-291" class="ident">String</a>(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-268" class="ident">addr</a>}, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-280"><code>	}</code></span>
<span class="codeline" id="line-281"><code>	<span class="keyword">if</span> <a href="#line-268" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>() == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-282"><code>		names, err := <a href="#line-295" class="ident">cgoLookupAddrPTR</a>(<a href="#line-268" class="ident">addr</a>, <a href="#line-277" class="ident">sa</a>, <a href="#line-277" class="ident">salen</a>)</code></span>
<span class="codeline" id="line-283"><code>		<span class="keyword">return</span> <a href="#line-282" class="ident">names</a>, <a href="#line-282" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-284"><code>	}</code></span>
<span class="codeline" id="line-285"><code>	result := <a href="../runtime/chan.go.html#line-71">make</a>(<span class="keyword">chan</span> <a href="#line-54" class="ident">reverseLookupResult</a>, <span class="lit-number">1</span>)</code></span>
<span class="codeline" id="line-286"><code>	<span class="keyword">go</span> <a href="#line-330" class="ident">cgoReverseLookup</a>(<a href="#line-285" class="ident">result</a>, <a href="#line-268" class="ident">addr</a>, <a href="#line-277" class="ident">sa</a>, <a href="#line-277" class="ident">salen</a>)</code></span>
<span class="codeline" id="line-287"><code>	<a href="../runtime/select.go.html#line-121"><span class="keyword">select</span></a> {</code></span>
<span class="codeline" id="line-288"><code>	<span class="keyword">case</span> r := <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-285" class="ident">result</a>:</code></span>
<span class="codeline" id="line-289"><code>		<span class="keyword">return</span> <a href="#line-288" class="ident">r</a>.<a href="#line-55" class="ident">names</a>, <a href="#line-288" class="ident">r</a>.<a href="#line-56" class="ident">err</a>, <a href="../../pkg/builtin.html#name-true" class="ident">true</a></code></span>
<span class="codeline" id="line-290"><code>	<span class="keyword">case</span> <a href="../runtime/chan.go.html#line-438">&lt;-</a><a href="#line-268" class="ident">ctx</a>.<a href="../context/context.go.html#line-99" class="ident">Done</a>():</code></span>
<span class="codeline" id="line-291"><code>		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <a href="net.go.html#line-421" class="ident">mapErr</a>(<a href="#line-268" class="ident">ctx</a>.<a href="../context/context.go.html#line-106" class="ident">Err</a>()), <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-292"><code>	}</code></span>
<span class="codeline" id="line-293"><code>}</code></span>
<span class="codeline" id="line-294"><code></code></span>
<span class="codeline" id="line-295"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoLookupAddrPTR" class="ident">cgoLookupAddrPTR</a>(addr <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, sa * <span class="comment">/*line :292:40*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-49" class="ident">_Ctype_struct_sockaddr</a> <span class="comment">/*line :292:57*/</span>, salen  <span class="comment">/*line :292:65*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-36" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :292:76*/</span>) (names []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>, err <a href="../../pkg/builtin.html#name-error" class="ident">error</a>) {</code></span>
<span class="codeline" id="line-296"><code>	<a href="net.go.html#line-668" class="ident">acquireThread</a>()</code></span>
<span class="codeline" id="line-297"><code>	<span class="keyword">defer</span> <a href="net.go.html#line-675" class="ident">releaseThread</a>()</code></span>
<span class="codeline" id="line-298"><code></code></span>
<span class="codeline" id="line-299"><code>	<span class="keyword">var</span> gerrno <a href="../../pkg/builtin.html#name-int" class="ident">int</a></code></span>
<span class="codeline" id="line-300"><code>	<span class="keyword">var</span> b []<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a></code></span>
<span class="codeline" id="line-301"><code>	<span class="keyword">for</span> l := <a href="#line-264" class="ident">nameinfoLen</a>; <a href="#line-301" class="ident">l</a> &lt;= <a href="#line-265" class="ident">maxNameinfoLen</a>; <a href="#line-301" class="ident">l</a> *= <span class="lit-number">2</span> {</code></span>
<span class="codeline" id="line-302"><code>		<a href="#line-300" class="ident">b</a> = <a href="../../pkg/builtin.html#name-make" class="ident">make</a>([]<a href="../../pkg/builtin.html#name-byte" class="ident">byte</a>, <a href="#line-301" class="ident">l</a>)</code></span>
<span class="codeline" id="line-303"><code>		<a href="#line-299" class="ident">gerrno</a>, <a href="#line-295" class="ident">err</a> = <a href="cgo_resnew.go.html#line-23" class="ident">cgoNameinfoPTR</a>(<a href="#line-300" class="ident">b</a>, <a href="#line-295" class="ident">sa</a>, <a href="#line-295" class="ident">salen</a>)</code></span>
<span class="codeline" id="line-304"><code>		<span class="keyword">if</span> <a href="#line-299" class="ident">gerrno</a> == <span class="lit-number">0</span> || <a href="#line-299" class="ident">gerrno</a> != ( <span class="comment">/*line :301:31*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-76" class="ident">_Ciconst_EAI_OVERFLOW</a> <span class="comment">/*line :301:44*/</span>) {</code></span>
<span class="codeline" id="line-305"><code>			<span class="keyword">break</span></code></span>
<span class="codeline" id="line-306"><code>		}</code></span>
<span class="codeline" id="line-307"><code>	}</code></span>
<span class="codeline" id="line-308"><code>	<span class="keyword">if</span> <a href="#line-299" class="ident">gerrno</a> != <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-309"><code>		isTemporary := <a href="../../pkg/builtin.html#name-false" class="ident">false</a></code></span>
<span class="codeline" id="line-310"><code>		<span class="keyword">switch</span> <a href="#line-299" class="ident">gerrno</a> {</code></span>
<span class="codeline" id="line-311"><code>		<span class="keyword">case</span> ( <span class="comment">/*line :308:8*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-77" class="ident">_Ciconst_EAI_SYSTEM</a> <span class="comment">/*line :308:19*/</span>):</code></span>
<span class="codeline" id="line-312"><code>			<span class="keyword">if</span> <a href="#line-295" class="ident">err</a> == <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> { <span class="comment">// see golang.org/issue/6232</span></code></span>
<span class="codeline" id="line-313"><code>				<a href="#line-295" class="ident">err</a> = <a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/zerrors_linux_amd64.go.html#line-1265" class="ident">EMFILE</a></code></span>
<span class="codeline" id="line-314"><code>			}</code></span>
<span class="codeline" id="line-315"><code>		<span class="keyword">default</span>:</code></span>
<span class="codeline" id="line-316"><code>			<a href="#line-295" class="ident">err</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-299" class="ident">gerrno</a>)</code></span>
<span class="codeline" id="line-317"><code>			<a href="#line-309" class="ident">isTemporary</a> = <a href="#line-37" class="ident">addrinfoErrno</a>(<a href="#line-299" class="ident">gerrno</a>).<a href="#line-40" class="ident">Temporary</a>()</code></span>
<span class="codeline" id="line-318"><code>		}</code></span>
<span class="codeline" id="line-319"><code>		<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, &amp;<a href="net.go.html#line-605" class="ident">DNSError</a>{<a href="net.go.html#line-606" class="ident">Err</a>: <a href="#line-295" class="ident">err</a>.Error(), <a href="net.go.html#line-607" class="ident">Name</a>: <a href="#line-295" class="ident">addr</a>, <a href="net.go.html#line-610" class="ident">IsTemporary</a>: <a href="#line-309" class="ident">isTemporary</a>}</code></span>
<span class="codeline" id="line-320"><code>	}</code></span>
<span class="codeline" id="line-321"><code>	<span class="keyword">for</span> i := <span class="lit-number">0</span>; <a href="#line-321" class="ident">i</a> &lt; <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-300" class="ident">b</a>); <a href="#line-321" class="ident">i</a>++ {</code></span>
<span class="codeline" id="line-322"><code>		<span class="keyword">if</span> <a href="#line-300" class="ident">b</a>[<a href="#line-321" class="ident">i</a>] == <span class="lit-number">0</span> {</code></span>
<span class="codeline" id="line-323"><code>			<a href="#line-300" class="ident">b</a> = <a href="#line-300" class="ident">b</a>[:<a href="#line-321" class="ident">i</a>]</code></span>
<span class="codeline" id="line-324"><code>			<span class="keyword">break</span></code></span>
<span class="codeline" id="line-325"><code>		}</code></span>
<span class="codeline" id="line-326"><code>	}</code></span>
<span class="codeline" id="line-327"><code>	<span class="keyword">return</span> []<a href="../../pkg/builtin.html#name-string" class="ident">string</a>{<a href="dnsclient.go.html#line-138" class="ident">absDomainName</a>(<a href="#line-300" class="ident">b</a>)}, <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a></code></span>
<span class="codeline" id="line-328"><code>}</code></span>
<span class="codeline" id="line-329"><code></code></span>
<span class="codeline" id="line-330"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoReverseLookup" class="ident">cgoReverseLookup</a>(result <span class="keyword">chan</span>&lt;- <a href="#line-54" class="ident">reverseLookupResult</a>, addr <a href="../../pkg/builtin.html#name-string" class="ident">string</a>, sa * <span class="comment">/*line :327:75*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-49" class="ident">_Ctype_struct_sockaddr</a> <span class="comment">/*line :327:92*/</span>, salen  <span class="comment">/*line :327:100*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-36" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :327:111*/</span>) {</code></span>
<span class="codeline" id="line-331"><code>	names, err := <a href="#line-295" class="ident">cgoLookupAddrPTR</a>(<a href="#line-330" class="ident">addr</a>, <a href="#line-330" class="ident">sa</a>, <a href="#line-330" class="ident">salen</a>)</code></span>
<span class="codeline" id="line-332"><code>	<a href="#line-330" class="ident">result</a> &lt;- <a href="#line-54" class="ident">reverseLookupResult</a>{<a href="#line-331" class="ident">names</a>, <a href="#line-331" class="ident">err</a>}</code></span>
<span class="codeline" id="line-333"><code>}</code></span>
<span class="codeline" id="line-334"><code></code></span>
<span class="codeline" id="line-335"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-cgoSockaddr" class="ident">cgoSockaddr</a>(ip <a href="ip.go.html#line-32" class="ident">IP</a>, zone <a href="../../pkg/builtin.html#name-string" class="ident">string</a>) (* <span class="comment">/*line :332:40*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-49" class="ident">_Ctype_struct_sockaddr</a> <span class="comment">/*line :332:57*/</span>,  <span class="comment">/*line :332:59*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-36" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :332:70*/</span>) {</code></span>
<span class="codeline" id="line-336"><code>	<span class="keyword">if</span> ip4 := <a href="#line-335" class="ident">ip</a>.<a href="ip.go.html#line-189" class="ident">To4</a>(); <a href="#line-336" class="ident">ip4</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-337"><code>		<span class="keyword">return</span> <a href="cgo_socknew.go.html#line-26" class="ident">cgoSockaddrInet4</a>(<a href="#line-336" class="ident">ip4</a>),  <span class="comment">/*line :334:33*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-36" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :334:44*/</span>(<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-311" class="ident">SizeofSockaddrInet4</a>)</code></span>
<span class="codeline" id="line-338"><code>	}</code></span>
<span class="codeline" id="line-339"><code>	<span class="keyword">if</span> ip6 := <a href="#line-335" class="ident">ip</a>.<a href="ip.go.html#line-204" class="ident">To16</a>(); <a href="#line-339" class="ident">ip6</a> != <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a> {</code></span>
<span class="codeline" id="line-340"><code>		<span class="keyword">return</span> <a href="cgo_socknew.go.html#line-32" class="ident">cgoSockaddrInet6</a>(<a href="#line-339" class="ident">ip6</a>, <a href="interface.go.html#line-185" class="ident">zoneCache</a>.<a href="interface.go.html#line-238" class="ident">index</a>(<a href="#line-335" class="ident">zone</a>)),  <span class="comment">/*line :337:56*/</span><a href="3c6d259f1b291feaa780c910c133e162f9a37ee43a2421baab750f4e820c4c43-d.html#line-36" class="ident">_Ctype_socklen_t</a> <span class="comment">/*line :337:67*/</span>(<a href="../../pkg/syscall.html" class="ident i2">syscall</a>.<a href="../syscall/ztypes_linux_amd64.go.html#line-312" class="ident">SizeofSockaddrInet6</a>)</code></span>
<span class="codeline" id="line-341"><code>	}</code></span>
<span class="codeline" id="line-342"><code>	<span class="keyword">return</span> <a href="../../pkg/builtin.html#name-nil" class="ident">nil</a>, <span class="lit-number">0</span></code></span>
<span class="codeline" id="line-343"><code>}</code></span>
<span class="codeline" id="line-344"><code></code></span>
<span class="codeline" id="line-345"><code><span class="keyword">func</span> <a href="../../pkg/net.html#name-copyIP" class="ident">copyIP</a>(x <a href="ip.go.html#line-32" class="ident">IP</a>) <a href="ip.go.html#line-32" class="ident">IP</a> {</code></span>
<span class="codeline" id="line-346"><code>	<span class="keyword">if</span> <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-345" class="ident">x</a>) &lt; <span class="lit-number">16</span> {</code></span>
<span class="codeline" id="line-347"><code>		<span class="keyword">return</span> <a href="#line-345" class="ident">x</a>.<a href="ip.go.html#line-204" class="ident">To16</a>()</code></span>
<span class="codeline" id="line-348"><code>	}</code></span>
<span class="codeline" id="line-349"><code>	y := <a href="../../pkg/builtin.html#name-make" class="ident">make</a>(<a href="ip.go.html#line-32" class="ident">IP</a>, <a href="../../pkg/builtin.html#name-len" class="ident">len</a>(<a href="#line-345" class="ident">x</a>))</code></span>
<span class="codeline" id="line-350"><code>	<a href="../../pkg/builtin.html#name-copy" class="ident">copy</a>(<a href="#line-349" class="ident">y</a>, <a href="#line-345" class="ident">x</a>)</code></span>
<span class="codeline" id="line-351"><code>	<span class="keyword">return</span> <a href="#line-349" class="ident">y</a></code></span>
<span class="codeline" id="line-352"><code>}</code></span>
</pre><pre id="footer">
<table><tr><td><img src="../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.2.7-preview</i>. (GOOS=linux GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>