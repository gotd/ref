<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>References: runtime.work</title>
<link href="../css/light-v0.3.6.css" rel="stylesheet">
<script src="../jvs/golds-v0.3.6.js"></script>
<body onload="onPageLoad()"><div>

<pre><code><span style="font-size:x-large;">var <b><a href="../pkg/runtime.html">runtime</a>.<a href="../src/runtime/mgc.go.html#line-286">work</a></b></span>

<span class="title">221 uses</span>

	runtime (current package)
		<a href="../src/runtime/mgc.go.html#line-163">mgc.go#L163</a>: 	<b>work</b>.startSema = 1
		<a href="../src/runtime/mgc.go.html#line-164" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-164">#L164</a>: 	<b>work</b>.markDoneSema = 1
		<a href="../src/runtime/mgc.go.html#line-165" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-165">#L165</a>: 	lockInit(&amp;<b>work</b>.sweepWaiters.lock, lockRankSweepWaiters)
		<a href="../src/runtime/mgc.go.html#line-166" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-166">#L166</a>: 	lockInit(&amp;<b>work</b>.assistQueue.lock, lockRankAssistQueue)
		<a href="../src/runtime/mgc.go.html#line-167" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-167">#L167</a>: 	lockInit(&amp;<b>work</b>.wbufSpans.lock, lockRankWbufSpans)
		<a href="../src/runtime/mgc.go.html#line-286" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-286">#L286</a>: var <b>work</b> struct {
		<a href="../src/runtime/mgc.go.html#line-432" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-432">#L432</a>: 	n := atomic.Load(&amp;<b>work</b>.cycles)
		<a href="../src/runtime/mgc.go.html#line-447" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-447">#L447</a>: 	for atomic.Load(&amp;<b>work</b>.cycles) == n+1 && sweepone() != ^uintptr(0) {
		<a href="../src/runtime/mgc.go.html#line-463" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-463">#L463</a>: 	for atomic.Load(&amp;<b>work</b>.cycles) == n+1 && !isSweepDone() {
		<a href="../src/runtime/mgc.go.html#line-471" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-471">#L471</a>: 	cycle := atomic.Load(&amp;<b>work</b>.cycles)
		<a href="../src/runtime/mgc.go.html#line-483" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-483">#L483</a>: 		lock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-484" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-484">#L484</a>: 		nMarks := atomic.Load(&amp;<b>work</b>.cycles)
		<a href="../src/runtime/mgc.go.html#line-491" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-491">#L491</a>: 			unlock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-497" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-497">#L497</a>: 		<b>work</b>.sweepWaiters.list.push(getg())
		<a href="../src/runtime/mgc.go.html#line-498" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-498">#L498</a>: 		goparkunlock(&amp;<b>work</b>.sweepWaiters.lock, waitReasonWaitForGCCycle, traceEvGoBlock, 1)
		<a href="../src/runtime/mgc.go.html#line-560" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-560">#L560</a>: 		return int32(t.n-<b>work</b>.cycles) > 0
		<a href="../src/runtime/mgc.go.html#line-600" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-600">#L600</a>: 	semacquire(&amp;<b>work</b>.startSema)
		<a href="../src/runtime/mgc.go.html#line-603" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-603">#L603</a>: 		semrelease(&amp;<b>work</b>.startSema)
		<a href="../src/runtime/mgc.go.html#line-608" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-608">#L608</a>: 	<b>work</b>.userForced = trigger.kind == gcTriggerCycle
		<a href="../src/runtime/mgc.go.html#line-641" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-641">#L641</a>: 	<b>work</b>.stwprocs, <b>work</b>.maxprocs = gomaxprocs, gomaxprocs
		<a href="../src/runtime/mgc.go.html#line-642" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-642">#L642</a>: 	if <b>work</b>.stwprocs > ncpu {
		<a href="../src/runtime/mgc.go.html#line-645" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-645">#L645</a>: 		<b>work</b>.stwprocs = ncpu
		<a href="../src/runtime/mgc.go.html#line-647" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-647">#L647</a>: 	<b>work</b>.heap0 = atomic.Load64(&gcController.heapLive)
		<a href="../src/runtime/mgc.go.html#line-648" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-648">#L648</a>: 	<b>work</b>.pauseNS = 0
		<a href="../src/runtime/mgc.go.html#line-649" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-649">#L649</a>: 	<b>work</b>.mode = mode
		<a href="../src/runtime/mgc.go.html#line-652" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-652">#L652</a>: 	<b>work</b>.tSweepTerm = now
		<a href="../src/runtime/mgc.go.html#line-653" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-653">#L653</a>: 	<b>work</b>.pauseStart = now
		<a href="../src/runtime/mgc.go.html#line-667" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-667">#L667</a>: 	<b>work</b>.cycles++
		<a href="../src/runtime/mgc.go.html#line-670" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-670">#L670</a>: 	<b>work</b>.heapGoal = gcController.heapGoal
		<a href="../src/runtime/mgc.go.html#line-723" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-723">#L723</a>: 		<b>work</b>.pauseNS += now - <b>work</b>.pauseStart
		<a href="../src/runtime/mgc.go.html#line-724" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-724">#L724</a>: 		<b>work</b>.tMark = now
		<a href="../src/runtime/mgc.go.html#line-725" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-725">#L725</a>: 		memstats.gcPauseDist.record(now - <b>work</b>.pauseStart)
		<a href="../src/runtime/mgc.go.html#line-741" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-741">#L741</a>: 	semrelease(&amp;<b>work</b>.startSema)
		<a href="../src/runtime/mgc.go.html#line-776" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-776">#L776</a>: 	semacquire(&amp;<b>work</b>.markDoneSema)
		<a href="../src/runtime/mgc.go.html#line-785" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-785">#L785</a>: 	if !(gcphase == _GCmark &amp;&amp; <b>work</b>.nwait == <b>work</b>.nproc && !gcMarkWorkAvailable(nil)) {
		<a href="../src/runtime/mgc.go.html#line-786" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-786">#L786</a>: 		semrelease(&amp;<b>work</b>.markDoneSema)
		<a href="../src/runtime/mgc.go.html#line-838" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-838">#L838</a>: 	<b>work</b>.tMarkTerm = now
		<a href="../src/runtime/mgc.go.html#line-839" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-839">#L839</a>: 	<b>work</b>.pauseStart = now
		<a href="../src/runtime/mgc.go.html#line-872" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-872">#L872</a>: 			<b>work</b>.pauseNS += now - <b>work</b>.pauseStart
		<a href="../src/runtime/mgc.go.html#line-873" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-873">#L873</a>: 			memstats.gcPauseDist.record(now - <b>work</b>.pauseStart)
		<a href="../src/runtime/mgc.go.html#line-890" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-890">#L890</a>: 	semrelease(&amp;<b>work</b>.markDoneSema)
		<a href="../src/runtime/mgc.go.html#line-899" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-899">#L899</a>: 	nextTriggerRatio := gcController.endCycle(<b>work</b>.userForced)
		<a href="../src/runtime/mgc.go.html#line-911" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-911">#L911</a>: 	<b>work</b>.heap1 = gcController.heapLive
		<a href="../src/runtime/mgc.go.html#line-939" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-939">#L939</a>: 		<b>work</b>.heap2 = <b>work</b>.bytesMarked
		<a href="../src/runtime/mgc.go.html#line-956" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-956">#L956</a>: 		gcSweep(<b>work</b>.mode)
		<a href="../src/runtime/mgc.go.html#line-984" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-984">#L984</a>: 	<b>work</b>.pauseNS += now - <b>work</b>.pauseStart
		<a href="../src/runtime/mgc.go.html#line-985" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-985">#L985</a>: 	<b>work</b>.tEnd = now
		<a href="../src/runtime/mgc.go.html#line-986" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-986">#L986</a>: 	memstats.gcPauseDist.record(now - <b>work</b>.pauseStart)
		<a href="../src/runtime/mgc.go.html#line-989" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-989">#L989</a>: 	memstats.pause_ns[memstats.numgc%uint32(len(memstats.pause_ns))] = uint64(<b>work</b>.pauseNS)
		<a href="../src/runtime/mgc.go.html#line-991" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-991">#L991</a>: 	memstats.pause_total_ns += uint64(<b>work</b>.pauseNS)
		<a href="../src/runtime/mgc.go.html#line-994" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-994">#L994</a>: 	sweepTermCpu := int64(<b>work</b>.stwprocs) * (<b>work</b>.tMark - <b>work</b>.tSweepTerm)
		<a href="../src/runtime/mgc.go.html#line-998" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-998">#L998</a>: 	markTermCpu := int64(<b>work</b>.stwprocs) * (<b>work</b>.tEnd - <b>work</b>.tMarkTerm)
		<a href="../src/runtime/mgc.go.html#line-1000" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1000">#L1000</a>: 	<b>work</b>.totaltime += cycleCpu
		<a href="../src/runtime/mgc.go.html#line-1004" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1004">#L1004</a>: 	memstats.gc_cpu_fraction = float64(<b>work</b>.totaltime) / float64(totalCpu)
		<a href="../src/runtime/mgc.go.html#line-1010" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1010">#L1010</a>: 	if <b>work</b>.userForced {
		<a href="../src/runtime/mgc.go.html#line-1015" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1015">#L1015</a>: 	lock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-1017" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1017">#L1017</a>: 	injectglist(&amp;<b>work</b>.sweepWaiters.list)
		<a href="../src/runtime/mgc.go.html#line-1018" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1018">#L1018</a>: 	unlock(&amp;<b>work</b>.sweepWaiters.lock)
		<a href="../src/runtime/mgc.go.html#line-1068" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1068">#L1068</a>: 			" @", string(itoaDiv(sbuf[:], uint64(<b>work</b>.tSweepTerm-runtimeInitTime)/1e6, 3)), "s ",
		<a href="../src/runtime/mgc.go.html#line-1070" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1070">#L1070</a>: 		prev := <b>work</b>.tSweepTerm
		<a href="../src/runtime/mgc.go.html#line-1071" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1071">#L1071</a>: 		for i, ns := range []int64{<b>work</b>.tMark, <b>work</b>.tMarkTerm, <b>work</b>.tEnd} {
		<a href="../src/runtime/mgc.go.html#line-1089" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1089">#L1089</a>: 			<b>work</b>.heap0&gt;&gt;20, "-&gt;", <b>work</b>.heap1&gt;&gt;20, "-&gt;", <b>work</b>.heap2>>20, " MB, ",
		<a href="../src/runtime/mgc.go.html#line-1090" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1090">#L1090</a>: 			<b>work</b>.heapGoal>>20, " MB goal, ",
		<a href="../src/runtime/mgc.go.html#line-1091" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1091">#L1091</a>: 			<b>work</b>.maxprocs, " P")
		<a href="../src/runtime/mgc.go.html#line-1092" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1092">#L1092</a>: 		if <b>work</b>.userForced {
		<a href="../src/runtime/mgc.go.html#line-1126" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1126">#L1126</a>: 		notetsleepg(&amp;<b>work</b>.bgMarkReady, -1)
		<a href="../src/runtime/mgc.go.html#line-1127" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1127">#L1127</a>: 		noteclear(&amp;<b>work</b>.bgMarkReady)
		<a href="../src/runtime/mgc.go.html#line-1147" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1147">#L1147</a>: 	<b>work</b>.nproc = ^uint32(0)
		<a href="../src/runtime/mgc.go.html#line-1148" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1148">#L1148</a>: 	<b>work</b>.nwait = ^uint32(0)
		<a href="../src/runtime/mgc.go.html#line-1179" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1179">#L1179</a>: 	notewakeup(&amp;<b>work</b>.bgMarkReady)
		<a href="../src/runtime/mgc.go.html#line-1250" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1250">#L1250</a>: 		decnwait := atomic.Xadd(&amp;<b>work</b>.nwait, -1)
		<a href="../src/runtime/mgc.go.html#line-1251" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1251">#L1251</a>: 		if decnwait == <b>work</b>.nproc {
		<a href="../src/runtime/mgc.go.html#line-1252" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1252">#L1252</a>: 			println("runtime: work.nwait=", decnwait, "work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgc.go.html#line-1308" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1308">#L1308</a>: 		incnwait := atomic.Xadd(&amp;<b>work</b>.nwait, +1)
		<a href="../src/runtime/mgc.go.html#line-1309" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1309">#L1309</a>: 		if incnwait &gt; <b>work</b>.nproc {
		<a href="../src/runtime/mgc.go.html#line-1311" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1311">#L1311</a>: 				"work.nwait=", incnwait, "work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgc.go.html#line-1323" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1323">#L1323</a>: 		if incnwait == <b>work</b>.nproc && !gcMarkWorkAvailable(nil) {
		<a href="../src/runtime/mgc.go.html#line-1342" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1342">#L1342</a>: 	if !<b>work</b>.full.empty() {
		<a href="../src/runtime/mgc.go.html#line-1345" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1345">#L1345</a>: 	if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgc.go.html#line-1362" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1362">#L1362</a>: 	<b>work</b>.tstart = startTime
		<a href="../src/runtime/mgc.go.html#line-1365" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1365">#L1365</a>: 	if <b>work</b>.full != 0 || <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgc.go.html#line-1366" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1366">#L1366</a>: 		print("runtime: full=", hex(<b>work</b>.full), " next=", <b>work</b>.markrootNext, " jobs=", <b>work</b>.markrootJobs, " nDataRoots=", <b>work</b>.nDataRoots, " nBSSRoots=", <b>work</b>.nBSSRoots, " nSpanRoots=", <b>work</b>.nSpanRoots, " nStackRoots=", <b>work</b>.nStackRoots, "\n")
		<a href="../src/runtime/mgc.go.html#line-1375" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1375">#L1375</a>: 	if <b>work</b>.full != 0 {
		<a href="../src/runtime/mgc.go.html#line-1424" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1424">#L1424</a>: 	gcController.heapMarked = <b>work</b>.bytesMarked
		<a href="../src/runtime/mgc.go.html#line-1441" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1441">#L1441</a>: 	gcController.heapLive = <b>work</b>.bytesMarked
		<a href="../src/runtime/mgc.go.html#line-1534" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1534">#L1534</a>: 	<b>work</b>.bytesMarked = 0
		<a href="../src/runtime/mgc.go.html#line-1535" class="path-duplicate">mgc.go</a><a href="../src/runtime/mgc.go.html#line-1535">#L1535</a>: 	<b>work</b>.initialHeapLive = atomic.Load64(&gcController.heapLive)
		<a href="../src/runtime/mgcmark.go.html#line-64">mgcmark.go#L64</a>: 	<b>work</b>.nDataRoots = 0
		<a href="../src/runtime/mgcmark.go.html#line-65" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-65">#L65</a>: 	<b>work</b>.nBSSRoots = 0
		<a href="../src/runtime/mgcmark.go.html#line-70" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-70">#L70</a>: 		if nDataRoots &gt; <b>work</b>.nDataRoots {
		<a href="../src/runtime/mgcmark.go.html#line-71" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-71">#L71</a>: 			<b>work</b>.nDataRoots = nDataRoots
		<a href="../src/runtime/mgcmark.go.html#line-77" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-77">#L77</a>: 		if nBSSRoots &gt; <b>work</b>.nBSSRoots {
		<a href="../src/runtime/mgcmark.go.html#line-78" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-78">#L78</a>: 			<b>work</b>.nBSSRoots = nBSSRoots
		<a href="../src/runtime/mgcmark.go.html#line-95" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-95">#L95</a>: 	<b>work</b>.nSpanRoots = len(mheap_.markArenas) * (pagesPerArena / pagesPerSpanRoot)
		<a href="../src/runtime/mgcmark.go.html#line-103" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-103">#L103</a>: 	<b>work</b>.nStackRoots = int(atomic.Loaduintptr(&allglen))
		<a href="../src/runtime/mgcmark.go.html#line-105" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-105">#L105</a>: 	<b>work</b>.markrootNext = 0
		<a href="../src/runtime/mgcmark.go.html#line-106" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-106">#L106</a>: 	<b>work</b>.markrootJobs = uint32(fixedRootCount + <b>work</b>.nDataRoots + <b>work</b>.nBSSRoots + <b>work</b>.nSpanRoots + <b>work</b>.nStackRoots)
		<a href="../src/runtime/mgcmark.go.html#line-109" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-109">#L109</a>: 	<b>work</b>.baseData = uint32(fixedRootCount)
		<a href="../src/runtime/mgcmark.go.html#line-110" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-110">#L110</a>: 	<b>work</b>.baseBSS = <b>work</b>.baseData + uint32(<b>work</b>.nDataRoots)
		<a href="../src/runtime/mgcmark.go.html#line-111" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-111">#L111</a>: 	<b>work</b>.baseSpans = <b>work</b>.baseBSS + uint32(<b>work</b>.nBSSRoots)
		<a href="../src/runtime/mgcmark.go.html#line-112" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-112">#L112</a>: 	<b>work</b>.baseStacks = <b>work</b>.baseSpans + uint32(<b>work</b>.nSpanRoots)
		<a href="../src/runtime/mgcmark.go.html#line-113" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-113">#L113</a>: 	<b>work</b>.baseEnd = <b>work</b>.baseStacks + uint32(<b>work</b>.nStackRoots)
		<a href="../src/runtime/mgcmark.go.html#line-119" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-119">#L119</a>: 	if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-120" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-120">#L120</a>: 		print(<b>work</b>.markrootNext, " of ", <b>work</b>.markrootJobs, " markroot jobs done\n")
		<a href="../src/runtime/mgcmark.go.html#line-131" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-131">#L131</a>: 		if i &gt;= <b>work</b>.nStackRoots {
		<a href="../src/runtime/mgcmark.go.html#line-159" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-159">#L159</a>: 	case <b>work</b>.baseData &lt;= i &amp;&amp; i &lt; <b>work</b>.baseBSS:
		<a href="../src/runtime/mgcmark.go.html#line-161" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-161">#L161</a>: 			markrootBlock(datap.data, datap.edata-datap.data, datap.gcdatamask.bytedata, gcw, int(i-<b>work</b>.baseData))
		<a href="../src/runtime/mgcmark.go.html#line-164" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-164">#L164</a>: 	case <b>work</b>.baseBSS &lt;= i &amp;&amp; i &lt; <b>work</b>.baseSpans:
		<a href="../src/runtime/mgcmark.go.html#line-166" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-166">#L166</a>: 			markrootBlock(datap.bss, datap.ebss-datap.bss, datap.gcbssmask.bytedata, gcw, int(i-<b>work</b>.baseBSS))
		<a href="../src/runtime/mgcmark.go.html#line-180" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-180">#L180</a>: 	case <b>work</b>.baseSpans &lt;= i &amp;&amp; i &lt; <b>work</b>.baseStacks:
		<a href="../src/runtime/mgcmark.go.html#line-182" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-182">#L182</a>: 		markrootSpans(gcw, int(i-<b>work</b>.baseSpans))
		<a href="../src/runtime/mgcmark.go.html#line-187" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-187">#L187</a>: 		if <b>work</b>.baseStacks &lt;= i &amp;&amp; i &lt; <b>work</b>.baseEnd {
		<a href="../src/runtime/mgcmark.go.html#line-191" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-191">#L191</a>: 			gp = allgs[i-<b>work</b>.baseStacks]
		<a href="../src/runtime/mgcmark.go.html#line-200" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-200">#L200</a>: 			gp.waitsince = <b>work</b>.tstart
		<a href="../src/runtime/mgcmark.go.html#line-524" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-524">#L524</a>: 	decnwait := atomic.Xadd(&amp;<b>work</b>.nwait, -1)
		<a href="../src/runtime/mgcmark.go.html#line-525" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-525">#L525</a>: 	if decnwait == <b>work</b>.nproc {
		<a href="../src/runtime/mgcmark.go.html#line-526" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-526">#L526</a>: 		println("runtime: work.nwait =", decnwait, "work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgcmark.go.html#line-552" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-552">#L552</a>: 	incnwait := atomic.Xadd(&amp;<b>work</b>.nwait, +1)
		<a href="../src/runtime/mgcmark.go.html#line-553" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-553">#L553</a>: 	if incnwait &gt; <b>work</b>.nproc {
		<a href="../src/runtime/mgcmark.go.html#line-555" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-555">#L555</a>: 			"work.nproc=", <b>work</b>.nproc)
		<a href="../src/runtime/mgcmark.go.html#line-559" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-559">#L559</a>: 	if incnwait == <b>work</b>.nproc && !gcMarkWorkAvailable(nil) {
		<a href="../src/runtime/mgcmark.go.html#line-579" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-579">#L579</a>: 	lock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-580" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-580">#L580</a>: 	list := <b>work</b>.assistQueue.q.popList()
		<a href="../src/runtime/mgcmark.go.html#line-582" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-582">#L582</a>: 	unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-592" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-592">#L592</a>: 	lock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-597" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-597">#L597</a>: 		unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-602" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-602">#L602</a>: 	oldList := <b>work</b>.assistQueue.q
		<a href="../src/runtime/mgcmark.go.html#line-603" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-603">#L603</a>: 	<b>work</b>.assistQueue.q.pushBack(gp)
		<a href="../src/runtime/mgcmark.go.html#line-610" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-610">#L610</a>: 		<b>work</b>.assistQueue.q = oldList
		<a href="../src/runtime/mgcmark.go.html#line-614" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-614">#L614</a>: 		unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-618" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-618">#L618</a>: 	goparkunlock(&amp;<b>work</b>.assistQueue.lock, waitReasonGCAssistWait, traceEvGoBlockGC, 2)
		<a href="../src/runtime/mgcmark.go.html#line-633" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-633">#L633</a>: 	if <b>work</b>.assistQueue.q.empty() {
		<a href="../src/runtime/mgcmark.go.html#line-645" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-645">#L645</a>: 	lock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-646" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-646">#L646</a>: 	for !<b>work</b>.assistQueue.q.empty() && scanBytes > 0 {
		<a href="../src/runtime/mgcmark.go.html#line-647" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-647">#L647</a>: 		gp := <b>work</b>.assistQueue.q.pop()
		<a href="../src/runtime/mgcmark.go.html#line-669" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-669">#L669</a>: 			<b>work</b>.assistQueue.q.pushBack(gp)
		<a href="../src/runtime/mgcmark.go.html#line-680" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-680">#L680</a>: 	unlock(&amp;<b>work</b>.assistQueue.lock)
		<a href="../src/runtime/mgcmark.go.html#line-1006" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1006">#L1006</a>: 	if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-1009" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1009">#L1009</a>: 			job := atomic.Xadd(&amp;<b>work</b>.markrootNext, +1) - 1
		<a href="../src/runtime/mgcmark.go.html#line-1010" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1010">#L1010</a>: 			if job &gt;= <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-1028" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1028">#L1028</a>: 		if <b>work</b>.full == 0 {
		<a href="../src/runtime/mgcmark.go.html#line-1106" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1106">#L1106</a>: 		if <b>work</b>.full == 0 {
		<a href="../src/runtime/mgcmark.go.html#line-1131" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1131">#L1131</a>: 			if <b>work</b>.markrootNext &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcmark.go.html#line-1132" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1132">#L1132</a>: 				job := atomic.Xadd(&amp;<b>work</b>.markrootNext, +1) - 1
		<a href="../src/runtime/mgcmark.go.html#line-1133" class="path-duplicate">mgcmark.go</a><a href="../src/runtime/mgcmark.go.html#line-1133">#L1133</a>: 				if job &lt; <b>work</b>.markrootJobs {
		<a href="../src/runtime/mgcpacer.go.html#line-339">mgcpacer.go#L339</a>: 			<b>work</b>.initialHeapLive>>20, "->",
		<a href="../src/runtime/mgcpacer.go.html#line-722" class="path-duplicate">mgcpacer.go</a><a href="../src/runtime/mgcpacer.go.html#line-722">#L722</a>: 			print("runtime: heapGoal=", c.heapGoal, " heapMarked=", c.heapMarked, " gcController.heapLive=", c.heapLive, " initialHeapLive=", <b>work</b>.initialHeapLive, "triggerRatio=", triggerRatio, " minTrigger=", minTrigger, "\n")
		<a href="../src/runtime/mgcpacer.go.html#line-833" class="path-duplicate">mgcpacer.go</a><a href="../src/runtime/mgcpacer.go.html#line-833">#L833</a>: 		gcWaitOnMark(atomic.Load(&amp;<b>work</b>.cycles))
		<a href="../src/runtime/mgcwork.go.html#line-115">mgcwork.go#L115</a>: 	lockWithRankMayAcquire(&amp;<b>work</b>.wbufSpans.lock, lockRankWbufSpans)
		<a href="../src/runtime/mgcwork.go.html#line-274" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-274">#L274</a>: 		atomic.Xadd64(&amp;<b>work</b>.bytesMarked, int64(w.bytesMarked))
		<a href="../src/runtime/mgcwork.go.html#line-350" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-350">#L350</a>: 	if <b>work</b>.empty != 0 {
		<a href="../src/runtime/mgcwork.go.html#line-351" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-351">#L351</a>: 		b = (*workbuf)(<b>work</b>.empty.pop())
		<a href="../src/runtime/mgcwork.go.html#line-358" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-358">#L358</a>: 	lockWithRankMayAcquire(&amp;<b>work</b>.wbufSpans.lock, lockRankWbufSpans)
		<a href="../src/runtime/mgcwork.go.html#line-363" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-363">#L363</a>: 		if <b>work</b>.wbufSpans.free.first != nil {
		<a href="../src/runtime/mgcwork.go.html#line-364" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-364">#L364</a>: 			lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-365" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-365">#L365</a>: 			s = <b>work</b>.wbufSpans.free.first
		<a href="../src/runtime/mgcwork.go.html#line-367" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-367">#L367</a>: 				<b>work</b>.wbufSpans.free.remove(s)
		<a href="../src/runtime/mgcwork.go.html#line-368" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-368">#L368</a>: 				<b>work</b>.wbufSpans.busy.insert(s)
		<a href="../src/runtime/mgcwork.go.html#line-370" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-370">#L370</a>: 			unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-380" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-380">#L380</a>: 			lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-381" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-381">#L381</a>: 			<b>work</b>.wbufSpans.busy.insert(s)
		<a href="../src/runtime/mgcwork.go.html#line-382" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-382">#L382</a>: 			unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-405" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-405">#L405</a>: 	<b>work</b>.empty.push(&b.node)
		<a href="../src/runtime/mgcwork.go.html#line-414" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-414">#L414</a>: 	<b>work</b>.full.push(&b.node)
		<a href="../src/runtime/mgcwork.go.html#line-421" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-421">#L421</a>: 	b := (*workbuf)(<b>work</b>.full.pop())
		<a href="../src/runtime/mgcwork.go.html#line-447" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-447">#L447</a>: 	lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-448" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-448">#L448</a>: 	if <b>work</b>.full != 0 {
		<a href="../src/runtime/mgcwork.go.html#line-454" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-454">#L454</a>: 	<b>work</b>.empty = 0
		<a href="../src/runtime/mgcwork.go.html#line-455" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-455">#L455</a>: 	<b>work</b>.wbufSpans.free.takeAll(&amp;<b>work</b>.wbufSpans.busy)
		<a href="../src/runtime/mgcwork.go.html#line-456" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-456">#L456</a>: 	unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-463" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-463">#L463</a>: 	lock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-464" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-464">#L464</a>: 	if gcphase != _GCoff || <b>work</b>.wbufSpans.free.isEmpty() {
		<a href="../src/runtime/mgcwork.go.html#line-465" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-465">#L465</a>: 		unlock(&amp;<b>work</b>.wbufSpans.lock)
		<a href="../src/runtime/mgcwork.go.html#line-471" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-471">#L471</a>: 			span := <b>work</b>.wbufSpans.free.first
		<a href="../src/runtime/mgcwork.go.html#line-475" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-475">#L475</a>: 			<b>work</b>.wbufSpans.free.remove(span)
		<a href="../src/runtime/mgcwork.go.html#line-479" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-479">#L479</a>: 	more := !<b>work</b>.wbufSpans.free.isEmpty()
		<a href="../src/runtime/mgcwork.go.html#line-480" class="path-duplicate">mgcwork.go</a><a href="../src/runtime/mgcwork.go.html#line-480">#L480</a>: 	unlock(&amp;<b>work</b>.wbufSpans.lock)
</code></pre><pre id="footer">
<table><tr><td><img src="../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/article/tool-golds.html"><b>Golds</b></a> <i>v0.3.6</i>. (GOOS=linux GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>